# HG changeset patch
# Parent 58ce6051edf56ce70c1a62e88bd879a6e56d9239
# User Jan Horak <jhorak@redhat.com>
# Bug 1129859 - Always use '-' as separator between lang-region in dictionary names, fixes problems with system dictionaries which has '_' as separator
try: -b do -p all -u all -t none

diff --git a/editor/composer/nsEditorSpellCheck.cpp b/editor/composer/nsEditorSpellCheck.cpp
--- a/editor/composer/nsEditorSpellCheck.cpp
+++ b/editor/composer/nsEditorSpellCheck.cpp
diff --git a/extensions/spellcheck/hunspell/src/mozHunspell.cpp b/extensions/spellcheck/hunspell/src/mozHunspell.cpp
--- a/extensions/spellcheck/hunspell/src/mozHunspell.cpp
+++ b/extensions/spellcheck/hunspell/src/mozHunspell.cpp
@@ -485,16 +485,19 @@ mozHunspell::LoadDictionariesFromDir(nsI
     rv = file->Exists(&check);
     if (NS_FAILED(rv) || !check)
       continue;
 
 #ifdef DEBUG_bsmedberg
     printf("Adding dictionary: %s\n", NS_ConvertUTF16toUTF8(dict).get());
 #endif
 
+    // Replace '_' separator with '-'
+    dict.ReplaceChar("_", '-');
+
     mDictionaries.Put(dict, file);
   }
 
   return NS_OK;
 }
 
 nsresult mozHunspell::ConvertCharset(const char16_t* aStr, char ** aDst)
 {
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/1463589_utf.aff b/extensions/spellcheck/hunspell/tests/unit/data/1463589-utf.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/1463589_utf.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/1463589-utf.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/1463589_utf.dic b/extensions/spellcheck/hunspell/tests/unit/data/1463589-utf.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/1463589_utf.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/1463589-utf.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/1463589_utf.sug b/extensions/spellcheck/hunspell/tests/unit/data/1463589-utf.sug
rename from extensions/spellcheck/hunspell/tests/unit/data/1463589_utf.sug
rename to extensions/spellcheck/hunspell/tests/unit/data/1463589-utf.sug
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/1463589_utf.test b/extensions/spellcheck/hunspell/tests/unit/data/1463589-utf.test
rename from extensions/spellcheck/hunspell/tests/unit/data/1463589_utf.test
rename to extensions/spellcheck/hunspell/tests/unit/data/1463589-utf.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/1463589_utf.wrong b/extensions/spellcheck/hunspell/tests/unit/data/1463589-utf.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/1463589_utf.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/1463589-utf.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.aff b/extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.dic b/extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.good b/extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.good
rename from extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.good
rename to extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.sug b/extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.sug
rename from extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.sug
rename to extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.sug
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.test b/extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.test
rename from extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.test
rename to extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.wrong b/extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/allcaps_utf.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/allcaps-utf.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/base_utf.aff b/extensions/spellcheck/hunspell/tests/unit/data/base-utf.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/base_utf.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/base-utf.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/base_utf.dic b/extensions/spellcheck/hunspell/tests/unit/data/base-utf.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/base_utf.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/base-utf.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/base_utf.good b/extensions/spellcheck/hunspell/tests/unit/data/base-utf.good
rename from extensions/spellcheck/hunspell/tests/unit/data/base_utf.good
rename to extensions/spellcheck/hunspell/tests/unit/data/base-utf.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/base_utf.sug b/extensions/spellcheck/hunspell/tests/unit/data/base-utf.sug
rename from extensions/spellcheck/hunspell/tests/unit/data/base_utf.sug
rename to extensions/spellcheck/hunspell/tests/unit/data/base-utf.sug
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/base_utf.test b/extensions/spellcheck/hunspell/tests/unit/data/base-utf.test
rename from extensions/spellcheck/hunspell/tests/unit/data/base_utf.test
rename to extensions/spellcheck/hunspell/tests/unit/data/base-utf.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/base_utf.wrong b/extensions/spellcheck/hunspell/tests/unit/data/base-utf.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/base_utf.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/base-utf.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/colons_in_words.aff b/extensions/spellcheck/hunspell/tests/unit/data/colons-in-words.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/colons_in_words.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/colons-in-words.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/colons_in_words.dic b/extensions/spellcheck/hunspell/tests/unit/data/colons-in-words.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/colons_in_words.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/colons-in-words.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/colons_in_words.test b/extensions/spellcheck/hunspell/tests/unit/data/colons-in-words.test
rename from extensions/spellcheck/hunspell/tests/unit/data/colons_in_words.test
rename to extensions/spellcheck/hunspell/tests/unit/data/colons-in-words.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/condition_utf.aff b/extensions/spellcheck/hunspell/tests/unit/data/condition-utf.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/condition_utf.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/condition-utf.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/condition_utf.dic b/extensions/spellcheck/hunspell/tests/unit/data/condition-utf.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/condition_utf.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/condition-utf.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/condition_utf.good b/extensions/spellcheck/hunspell/tests/unit/data/condition-utf.good
rename from extensions/spellcheck/hunspell/tests/unit/data/condition_utf.good
rename to extensions/spellcheck/hunspell/tests/unit/data/condition-utf.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/condition_utf.test b/extensions/spellcheck/hunspell/tests/unit/data/condition-utf.test
rename from extensions/spellcheck/hunspell/tests/unit/data/condition_utf.test
rename to extensions/spellcheck/hunspell/tests/unit/data/condition-utf.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/condition_utf.wrong b/extensions/spellcheck/hunspell/tests/unit/data/condition-utf.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/condition_utf.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/condition-utf.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/digits_in_words.aff b/extensions/spellcheck/hunspell/tests/unit/data/digits-in-words.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/digits_in_words.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/digits-in-words.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/digits_in_words.dic b/extensions/spellcheck/hunspell/tests/unit/data/digits-in-words.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/digits_in_words.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/digits-in-words.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/digits_in_words.test b/extensions/spellcheck/hunspell/tests/unit/data/digits-in-words.test
rename from extensions/spellcheck/hunspell/tests/unit/data/digits_in_words.test
rename to extensions/spellcheck/hunspell/tests/unit/data/digits-in-words.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/digits_in_words.wrong b/extensions/spellcheck/hunspell/tests/unit/data/digits-in-words.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/digits_in_words.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/digits-in-words.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.aff b/extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.dic b/extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.good b/extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.good
rename from extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.good
rename to extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.sug b/extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.sug
rename from extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.sug
rename to extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.sug
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.test b/extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.test
rename from extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.test
rename to extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.wrong b/extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/ngram_utf_fix.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/ngram-utf-fix.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat.aff b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat.dic b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat.good b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat.good
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat.good
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat.test b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat.test
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat.test
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat.wrong b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat2.aff b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat2.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat2.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat2.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat2.dic b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat2.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat2.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat2.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat2.good b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat2.good
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat2.good
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat2.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat2.test b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat2.test
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat2.test
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat2.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat2.wrong b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat2.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_cpdpat2.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-cpdpat2.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.aff b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.dic b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.good b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.good
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.good
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.sug b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.sug
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.sug
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.sug
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.test b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.test
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.test
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.wrong b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword1.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword1.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.aff b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.dic b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.good b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.good
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.good
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.sug b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.sug
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.sug
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.sug
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.test b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.test
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.test
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.wrong b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_forbiddenword2.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-forbiddenword2.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.aff b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.dic b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.good b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.good
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.good
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.sug b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.sug
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.sug
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.sug
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.test b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.test
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.test
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.wrong b/extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/opentaal_keepcase.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/opentaal-keepcase.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_bom.aff b/extensions/spellcheck/hunspell/tests/unit/data/utf8-bom.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_bom.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-bom.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_bom.dic b/extensions/spellcheck/hunspell/tests/unit/data/utf8-bom.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_bom.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-bom.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_bom.good b/extensions/spellcheck/hunspell/tests/unit/data/utf8-bom.good
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_bom.good
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-bom.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_bom.test b/extensions/spellcheck/hunspell/tests/unit/data/utf8-bom.test
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_bom.test
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-bom.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_bom2.aff b/extensions/spellcheck/hunspell/tests/unit/data/utf8-bom2.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_bom2.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-bom2.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_bom2.dic b/extensions/spellcheck/hunspell/tests/unit/data/utf8-bom2.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_bom2.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-bom2.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_bom2.good b/extensions/spellcheck/hunspell/tests/unit/data/utf8-bom2.good
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_bom2.good
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-bom2.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_bom2.test b/extensions/spellcheck/hunspell/tests/unit/data/utf8-bom2.test
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_bom2.test
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-bom2.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.aff b/extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.aff
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.aff
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.aff
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.dic b/extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.dic
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.dic
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.dic
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.good b/extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.good
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.good
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.good
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.sug b/extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.sug
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.sug
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.sug
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.test b/extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.test
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.test
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.test
diff --git a/extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.wrong b/extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.wrong
rename from extensions/spellcheck/hunspell/tests/unit/data/utf8_nonbmp.wrong
rename to extensions/spellcheck/hunspell/tests/unit/data/utf8-nonbmp.wrong
diff --git a/extensions/spellcheck/hunspell/tests/unit/test_hunspell.js b/extensions/spellcheck/hunspell/tests/unit/test_hunspell.js
--- a/extensions/spellcheck/hunspell/tests/unit/test_hunspell.js
+++ b/extensions/spellcheck/hunspell/tests/unit/test_hunspell.js
@@ -3,21 +3,21 @@
  */
 
 const Cc = Components.classes;
 const Ci = Components.interfaces;
 
 const tests = [
     ["affixes", "iso-8859-1"],
     ["condition", "iso-8859-1"],
-    ["condition_utf", "UTF-8"],
+    ["condition-utf", "UTF-8"],
     ["base", "iso-8859-1"],
-    ["base_utf", "UTF-8"],
+    ["base-utf", "UTF-8"],
     ["allcaps", "iso-8859-1"],
-    ["allcaps_utf", "UTF-8"],
+    ["allcaps-utf", "UTF-8"],
     ["allcaps2", "iso-8859-1"],
     ["allcaps3", "iso-8859-1"],
     ["keepcase", "iso-8859-1"],
     ["i58202", "iso-8859-1"],
     ["map", "iso-8859-1"],
     ["rep", "iso-8859-1"],
     ["sug", "iso-8859-1"],
     ["sugutf", "UTF-8"],
@@ -43,19 +43,19 @@ const tests = [
     ["fogemorpheme", "iso-8859-1"],
     ["onlyincompound", "iso-8859-1"],
     ["complexprefixes", "iso-8859-1"],
     ["complexprefixes2", "iso-8859-1"],
     ["complexprefixesutf", "UTF-8"],
     ["conditionalprefix", "iso-8859-1"],
     ["zeroaffix", "iso-8859-1"],
     ["utf8", "UTF-8"],
-    ["utf8_bom", "UTF-8", {1: "todo"}],
-    ["utf8_bom2", "UTF-8", {1: "todo"}],
-    ["utf8_nonbmp", "UTF-8", {1: "todo", 2: "todo", 3: "todo", 4: "todo"}],
+    ["utf8-bom", "UTF-8", {1: "todo"}],
+    ["utf8-bom2", "UTF-8", {1: "todo"}],
+    ["utf8-nonbmp", "UTF-8", {1: "todo", 2: "todo", 3: "todo", 4: "todo"}],
     ["compoundflag", "iso-8859-1"],
     ["compoundrule", "iso-8859-1"],
     ["compoundrule2", "iso-8859-1"],
     ["compoundrule3", "iso-8859-1"],
     ["compoundrule4", "iso-8859-1"],
     ["compoundrule5", "UTF-8"],
     ["compoundrule6", "iso-8859-1"],
     ["compoundrule7", "iso-8859-1"],
@@ -86,43 +86,43 @@ const tests = [
     ["reputf", "UTF-8"],
     ["ignore", "iso-8859-1"],
     ["ignoreutf", "UTF-8",
      {1: "todo", 2: "todo", 3: "todo", 4: "todo", 5: "todo", 6: "todo",
       7: "todo", 8: "todo"}],
     ["1592880", "iso-8859-1"],
     ["1695964", "iso-8859-1"],
     ["1463589", "iso-8859-1"],
-    ["1463589_utf", "UTF-8"],
+    ["1463589-utf", "UTF-8"],
     ["IJ", "iso-8859-1"],
     ["i68568", "iso-8859-1"],
     ["i68568utf", "UTF-8"],
     ["1706659", "iso-8859-1"],
-    ["digits_in_words", "iso-8859-1"],
-//    ["colons_in_words", "iso-8859-1"], Suggestion test only
-    ["ngram_utf_fix", "UTF-8"],
+    ["digits-in-words", "iso-8859-1"],
+//    ["colons-in-words", "iso-8859-1"], Suggestion test only
+    ["ngram-utf-fix", "UTF-8"],
     ["morph", "us-ascii",
      {11: "todo", 12: "todo", 13: "todo", 14: "todo", 15: "todo", 16: "todo",
       17: "todo", 18: "todo", 19: "todo", 20: "todo", 21: "todo", 22: "todo",
       23: "todo", 24: "todo", 25: "todo", 26: "todo", 27: "todo"}],
     ["1975530", "UTF-8"],
     ["fullstrip", "iso-8859-1"],
     ["iconv", "UTF-8"],
     ["oconv", "UTF-8"],
     ["encoding", "iso-8859-1", {1: "todo", 3: "todo"}],
     ["korean", "UTF-8"],
-    ["opentaal_forbiddenword1", "UTF-8"],
-    ["opentaal_forbiddenword2", "UTF-8"],
-    ["opentaal_keepcase", "UTF-8"],
+    ["opentaal-forbiddenword1", "UTF-8"],
+    ["opentaal-forbiddenword2", "UTF-8"],
+    ["opentaal-keepcase", "UTF-8"],
     ["arabic", "UTF-8"],
     ["2970240", "iso-8859-1"],
     ["2970242", "iso-8859-1"],
     ["breakoff", "iso-8859-1"],
-    ["opentaal_cpdpat", "iso-8859-1"],
-    ["opentaal_cpdpat2", "iso-8859-1"],
+    ["opentaal-cpdpat", "iso-8859-1"],
+    ["opentaal-cpdpat2", "iso-8859-1"],
     ["2999225", "iso-8859-1"],
     ["onlyincompound2", "iso-8859-1"],
     ["forceucase", "iso-8859-1"],
     ["warn", "iso-8859-1"]
 ];
 
 function do_get_file_by_line(file, charset) {
   dump("getting file by line for file " + file.path + "\n");
diff --git a/extensions/spellcheck/tests/chrome/test_add_remove_dictionaries.xul b/extensions/spellcheck/tests/chrome/test_add_remove_dictionaries.xul
--- a/extensions/spellcheck/tests/chrome/test_add_remove_dictionaries.xul
+++ b/extensions/spellcheck/tests/chrome/test_add_remove_dictionaries.xul
@@ -63,26 +63,26 @@ function RunTest() {
   ok(map.exists());
   hunspell.addDirectory(map);
 
   Components.utils.import("resource://gre/modules/AsyncSpellCheckTestHelper.jsm");
   onSpellCheck(textbox, function () {
 
     // test that base and map dictionaries are available
     var dicts = getDictionaryList(editor);
-    isnot(dicts.indexOf("base_utf"), -1, "base is available");
+    isnot(dicts.indexOf("base-utf"), -1, "base is available");
     isnot(dicts.indexOf("maputf"), -1, "map is available");
 
     // select base dictionary
-    setCurrentDictionary(editor, "base_utf");
+    setCurrentDictionary(editor, "base-utf");
 
     onSpellCheck(textbox, function () {
       // test that base dictionary is in use
       is(getMisspelledWords(editor), "Frühstück" + "qwertyu", "base misspellings");
-      is(getCurrentDictionary(editor), "base_utf", "current dictionary");
+      is(getCurrentDictionary(editor), "base-utf", "current dictionary");
 
       // select map dictionary
       setCurrentDictionary(editor, "maputf");
 
       onSpellCheck(textbox, function () {
         // test that map dictionary is in use
         is(getMisspelledWords(editor), "created" + "imply" + "tomorrow" + "qwertyu", "map misspellings");
         is(getCurrentDictionary(editor), "maputf", "current dictionary");
@@ -92,17 +92,17 @@ function RunTest() {
 
         onSpellCheck(textbox, function () {
           // test that map dictionary is not in use
           isnot(getMisspelledWords(editor), "created" + "imply" + "tomorrow" + "qwertyu", "map misspellings");
           isnot(getCurrentDictionary(editor), "maputf", "current dictionary");
 
           // test that base dictionary is available and map dictionary is unavailable
           var dicts = getDictionaryList(editor);
-          isnot(dicts.indexOf("base_utf"), -1, "base is available");
+          isnot(dicts.indexOf("base-utf"), -1, "base is available");
           is(dicts.indexOf("maputf"), -1, "map is unavailable");
 
           // uninstall base dictionary
           hunspell.removeDirectory(base);
 
           onSpellCheck(textbox, function () {
             SimpleTest.finish();
           });
